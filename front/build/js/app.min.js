"use strict";

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

var $ = require('jquery'); // import $ from 'jquery'
// import Render from './render'


render = new Render();
$(document).ready(function () {
  render.homePage();
  $('body').html(data);
  $.ajax({
    url: "http://localhost:5000/",
    headers: {
      token: window.localStorage.getItem('token'),
      userId: window.localStorage.getItem('userId')
    },
    type: "GET",
    beforeSend: function beforeSend(xhr) {
      xhr.setRequestHeader('X-Test-Header', 'test-value');
    },
    success: function success(data) {//render.projectPage()
    },
    error: function error(err) {
      console.log(err.status, _typeof(err.status), "error");

      if (err.status == 403) {
        render.loginPage();
      }
    }
  });
});
"use strict";

console.log('chlen sobaki');
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _jquery = _interopRequireDefault(require("jquery"));

var _pug = _interopRequireDefault(require("pug"));

var _functions = _interopRequireDefault(require("./functions.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var Render =
/*#__PURE__*/
function () {
  function Render() {
    _classCallCheck(this, Render);
  }

  _createClass(Render, [{
    key: "wrapper",
    value: function wrapper() {
      return (0, _jquery.default)('.wrapper');
    }
  }, {
    key: "loadTemplate",
    value: function loadTemplate(url, container, context) {
      _jquery.default.get(url, function (response) {
        console.log(response);

        var template = _pug.default.compile(response);

        if (context) {
          template = template(context);
        }

        container.html(template);
      });
    }
  }, {
    key: "homePage",
    value: function homePage() {
      this.loadTemplate('../view/home.pug');
    }
  }, {
    key: "loginPage",
    value: function loginPage() {
      this.loadTemplate('../views/login.pug', this.wrapper());
    }
  }, {
    key: "registerPage",
    value: function registerPage() {
      this.loadTemplate('../views/register.pug', this.wrapper(), captcha);
    }
  }, {
    key: "profilePage",
    value: function profilePage(data) {
      this.loadTemplate('../views/profile.pug', this.wrapper(), data);
    }
  }, {
    key: "registerPage",
    value: function registerPage() {
      var functions = new _functions.default();
      var captcha = {
        firstNumber: functions.random(1, 10),
        lastNumber: functions.random(1, 10)
      };
      this.loadTemplate('./src/views/register.hbs', this.wrapper(), captcha);
    }
  }, {
    key: "recoverPassPage",
    //PROFILE PAGE
    value: function recoverPassPage() {
      this.loadTemplate('./src/views/recoverPass.hbs', this.wrapper());
    }
  }, {
    key: "profileSettingsPage",
    //RECOVER PASS PAGE
    value: function profileSettingsPage(containerSelector, data) {
      var functions = new _functions.default();
      var context = {
        profile: {
          firstName: data.profile.firstname,
          lastName: data.profile.lastname,
          quote: data.profile.quote,
          photo: data.profile.photo,
          lived: data.profile.lived,
          from: data.profile.from,
          went: data.profile.went
        }
      };
      var container = (0, _jquery.default)(containerSelector);
      this.loadTemplate('./src/views/profileSettings.hbs', container, context);
    }
  }, {
    key: "searchResults",
    //PROFILE SETTINGS
    value: function searchResults(containerSelector, data) {
      var container = (0, _jquery.default)(containerSelector);
      this.loadTemplate('./src/views/searchResults.hbs', container, data);
    }
  }, {
    key: "allFriendsOrEnemies",
    //SEARCH RESULTS
    value: function allFriendsOrEnemies(containerSelector, data, callback) {
      var container = (0, _jquery.default)(containerSelector);
      this.loadTemplate('./src/views/allFriendsOrEnemies.hbs', container, data, callback);
    }
  }]);

  return Render;
}();

exports.default = Render;
;
var oldRender = {
  loginPage: function loginPage() {
    this.createRoute('views/pages/login.hbs', App.wrapper);
  },
  profilePage: function profilePage(data) {
    var context = {
      firstName: data.profile.firstname,
      lastName: data.profile.lastname
    };
    this.createRoute('views/pages/profile.hbs', App.wrapper, context);
  },
  registerPage: function registerPage() {
    this.createRoute('views/pages/register.hbs', App.wrapper);
  },
  albumsPage: function albumsPage() {
    this.createRoute('views/pages/albums.hbs', App.wrapper);
  },
  albumPage: function albumPage(album) {
    this.createRoute('views/pages/album.hbs', App.wrapper, album);
  },
  navUser: function navUser() {
    this.createRoute('views/modules/header-nav-authorized.hbs', App.header);
  },
  navGuest: function navGuest() {
    this.createRoute('views/modules/header-nav-unauthorized.hbs', App.header);
  },
  addAlbumForm: function addAlbumForm() {
    this.createRoute('views/modules/add-album-form.hbs', (0, _jquery.default)('.add-album-container'));
    setTimeout(function () {
      (0, _jquery.default)('.add-album-form').slideDown();
    }, 500);
  },
  addPhotoForm: function addPhotoForm() {
    this.createRoute('views/modules/add-photo-form.hbs', (0, _jquery.default)('.add-photo-container'));
    setTimeout(function () {
      (0, _jquery.default)('.add-photo-form').slideDown();
    }, 500);
  },
  createRoute: function createRoute(url, container, context) {
    var template;

    _jquery.default.get(url, function (response) {
      template = Handlebars.compile(response);

      if (context) {
        template = template(context);
      }

      container.html(template);
    });
  }
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwaS5qcyIsImluZGV4LmpzIiwicmVuZGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hDQTtBQUNBO0FBQ0E7QUNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTsgLy8gaW1wb3J0ICQgZnJvbSAnanF1ZXJ5J1xuLy8gaW1wb3J0IFJlbmRlciBmcm9tICcuL3JlbmRlcidcblxuXG5yZW5kZXIgPSBuZXcgUmVuZGVyKCk7XG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gIHJlbmRlci5ob21lUGFnZSgpO1xuICAkKCdib2R5JykuaHRtbChkYXRhKTtcbiAgJC5hamF4KHtcbiAgICB1cmw6IFwiaHR0cDovL2xvY2FsaG9zdDo1MDAwL1wiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIHRva2VuOiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyksXG4gICAgICB1c2VySWQ6IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJylcbiAgICB9LFxuICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgYmVmb3JlU2VuZDogZnVuY3Rpb24gYmVmb3JlU2VuZCh4aHIpIHtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLVRlc3QtSGVhZGVyJywgJ3Rlc3QtdmFsdWUnKTtcbiAgICB9LFxuICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkgey8vcmVuZGVyLnByb2plY3RQYWdlKClcbiAgICB9LFxuICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVyci5zdGF0dXMsIF90eXBlb2YoZXJyLnN0YXR1cyksIFwiZXJyb3JcIik7XG5cbiAgICAgIGlmIChlcnIuc3RhdHVzID09IDQwMykge1xuICAgICAgICByZW5kZXIubG9naW5QYWdlKCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn0pOyIsIlwidXNlIHN0cmljdFwiO1xuXG5jb25zb2xlLmxvZygnY2hsZW4gc29iYWtpJyk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX2pxdWVyeSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImpxdWVyeVwiKSk7XG5cbnZhciBfcHVnID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicHVnXCIpKTtcblxudmFyIF9mdW5jdGlvbnMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2Z1bmN0aW9ucy5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxudmFyIFJlbmRlciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFJlbmRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVuZGVyKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhSZW5kZXIsIFt7XG4gICAga2V5OiBcIndyYXBwZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gd3JhcHBlcigpIHtcbiAgICAgIHJldHVybiAoMCwgX2pxdWVyeS5kZWZhdWx0KSgnLndyYXBwZXInKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibG9hZFRlbXBsYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRUZW1wbGF0ZSh1cmwsIGNvbnRhaW5lciwgY29udGV4dCkge1xuICAgICAgX2pxdWVyeS5kZWZhdWx0LmdldCh1cmwsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cbiAgICAgICAgdmFyIHRlbXBsYXRlID0gX3B1Zy5kZWZhdWx0LmNvbXBpbGUocmVzcG9uc2UpO1xuXG4gICAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZShjb250ZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRhaW5lci5odG1sKHRlbXBsYXRlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJob21lUGFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBob21lUGFnZSgpIHtcbiAgICAgIHRoaXMubG9hZFRlbXBsYXRlKCcuLi92aWV3L2hvbWUucHVnJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImxvZ2luUGFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dpblBhZ2UoKSB7XG4gICAgICB0aGlzLmxvYWRUZW1wbGF0ZSgnLi4vdmlld3MvbG9naW4ucHVnJywgdGhpcy53cmFwcGVyKCkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZWdpc3RlclBhZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJQYWdlKCkge1xuICAgICAgdGhpcy5sb2FkVGVtcGxhdGUoJy4uL3ZpZXdzL3JlZ2lzdGVyLnB1ZycsIHRoaXMud3JhcHBlcigpLCBjYXB0Y2hhKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicHJvZmlsZVBhZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvZmlsZVBhZ2UoZGF0YSkge1xuICAgICAgdGhpcy5sb2FkVGVtcGxhdGUoJy4uL3ZpZXdzL3Byb2ZpbGUucHVnJywgdGhpcy53cmFwcGVyKCksIGRhdGEpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZWdpc3RlclBhZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXJQYWdlKCkge1xuICAgICAgdmFyIGZ1bmN0aW9ucyA9IG5ldyBfZnVuY3Rpb25zLmRlZmF1bHQoKTtcbiAgICAgIHZhciBjYXB0Y2hhID0ge1xuICAgICAgICBmaXJzdE51bWJlcjogZnVuY3Rpb25zLnJhbmRvbSgxLCAxMCksXG4gICAgICAgIGxhc3ROdW1iZXI6IGZ1bmN0aW9ucy5yYW5kb20oMSwgMTApXG4gICAgICB9O1xuICAgICAgdGhpcy5sb2FkVGVtcGxhdGUoJy4vc3JjL3ZpZXdzL3JlZ2lzdGVyLmhicycsIHRoaXMud3JhcHBlcigpLCBjYXB0Y2hhKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVjb3ZlclBhc3NQYWdlXCIsXG4gICAgLy9QUk9GSUxFIFBBR0VcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVjb3ZlclBhc3NQYWdlKCkge1xuICAgICAgdGhpcy5sb2FkVGVtcGxhdGUoJy4vc3JjL3ZpZXdzL3JlY292ZXJQYXNzLmhicycsIHRoaXMud3JhcHBlcigpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicHJvZmlsZVNldHRpbmdzUGFnZVwiLFxuICAgIC8vUkVDT1ZFUiBQQVNTIFBBR0VcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvZmlsZVNldHRpbmdzUGFnZShjb250YWluZXJTZWxlY3RvciwgZGF0YSkge1xuICAgICAgdmFyIGZ1bmN0aW9ucyA9IG5ldyBfZnVuY3Rpb25zLmRlZmF1bHQoKTtcbiAgICAgIHZhciBjb250ZXh0ID0ge1xuICAgICAgICBwcm9maWxlOiB7XG4gICAgICAgICAgZmlyc3ROYW1lOiBkYXRhLnByb2ZpbGUuZmlyc3RuYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiBkYXRhLnByb2ZpbGUubGFzdG5hbWUsXG4gICAgICAgICAgcXVvdGU6IGRhdGEucHJvZmlsZS5xdW90ZSxcbiAgICAgICAgICBwaG90bzogZGF0YS5wcm9maWxlLnBob3RvLFxuICAgICAgICAgIGxpdmVkOiBkYXRhLnByb2ZpbGUubGl2ZWQsXG4gICAgICAgICAgZnJvbTogZGF0YS5wcm9maWxlLmZyb20sXG4gICAgICAgICAgd2VudDogZGF0YS5wcm9maWxlLndlbnRcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHZhciBjb250YWluZXIgPSAoMCwgX2pxdWVyeS5kZWZhdWx0KShjb250YWluZXJTZWxlY3Rvcik7XG4gICAgICB0aGlzLmxvYWRUZW1wbGF0ZSgnLi9zcmMvdmlld3MvcHJvZmlsZVNldHRpbmdzLmhicycsIGNvbnRhaW5lciwgY29udGV4dCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNlYXJjaFJlc3VsdHNcIixcbiAgICAvL1BST0ZJTEUgU0VUVElOR1NcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoUmVzdWx0cyhjb250YWluZXJTZWxlY3RvciwgZGF0YSkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfanF1ZXJ5LmRlZmF1bHQpKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICAgIHRoaXMubG9hZFRlbXBsYXRlKCcuL3NyYy92aWV3cy9zZWFyY2hSZXN1bHRzLmhicycsIGNvbnRhaW5lciwgZGF0YSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFsbEZyaWVuZHNPckVuZW1pZXNcIixcbiAgICAvL1NFQVJDSCBSRVNVTFRTXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFsbEZyaWVuZHNPckVuZW1pZXMoY29udGFpbmVyU2VsZWN0b3IsIGRhdGEsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gKDAsIF9qcXVlcnkuZGVmYXVsdCkoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgICAgdGhpcy5sb2FkVGVtcGxhdGUoJy4vc3JjL3ZpZXdzL2FsbEZyaWVuZHNPckVuZW1pZXMuaGJzJywgY29udGFpbmVyLCBkYXRhLCBjYWxsYmFjayk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJlbmRlcjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUmVuZGVyO1xuO1xudmFyIG9sZFJlbmRlciA9IHtcbiAgbG9naW5QYWdlOiBmdW5jdGlvbiBsb2dpblBhZ2UoKSB7XG4gICAgdGhpcy5jcmVhdGVSb3V0ZSgndmlld3MvcGFnZXMvbG9naW4uaGJzJywgQXBwLndyYXBwZXIpO1xuICB9LFxuICBwcm9maWxlUGFnZTogZnVuY3Rpb24gcHJvZmlsZVBhZ2UoZGF0YSkge1xuICAgIHZhciBjb250ZXh0ID0ge1xuICAgICAgZmlyc3ROYW1lOiBkYXRhLnByb2ZpbGUuZmlyc3RuYW1lLFxuICAgICAgbGFzdE5hbWU6IGRhdGEucHJvZmlsZS5sYXN0bmFtZVxuICAgIH07XG4gICAgdGhpcy5jcmVhdGVSb3V0ZSgndmlld3MvcGFnZXMvcHJvZmlsZS5oYnMnLCBBcHAud3JhcHBlciwgY29udGV4dCk7XG4gIH0sXG4gIHJlZ2lzdGVyUGFnZTogZnVuY3Rpb24gcmVnaXN0ZXJQYWdlKCkge1xuICAgIHRoaXMuY3JlYXRlUm91dGUoJ3ZpZXdzL3BhZ2VzL3JlZ2lzdGVyLmhicycsIEFwcC53cmFwcGVyKTtcbiAgfSxcbiAgYWxidW1zUGFnZTogZnVuY3Rpb24gYWxidW1zUGFnZSgpIHtcbiAgICB0aGlzLmNyZWF0ZVJvdXRlKCd2aWV3cy9wYWdlcy9hbGJ1bXMuaGJzJywgQXBwLndyYXBwZXIpO1xuICB9LFxuICBhbGJ1bVBhZ2U6IGZ1bmN0aW9uIGFsYnVtUGFnZShhbGJ1bSkge1xuICAgIHRoaXMuY3JlYXRlUm91dGUoJ3ZpZXdzL3BhZ2VzL2FsYnVtLmhicycsIEFwcC53cmFwcGVyLCBhbGJ1bSk7XG4gIH0sXG4gIG5hdlVzZXI6IGZ1bmN0aW9uIG5hdlVzZXIoKSB7XG4gICAgdGhpcy5jcmVhdGVSb3V0ZSgndmlld3MvbW9kdWxlcy9oZWFkZXItbmF2LWF1dGhvcml6ZWQuaGJzJywgQXBwLmhlYWRlcik7XG4gIH0sXG4gIG5hdkd1ZXN0OiBmdW5jdGlvbiBuYXZHdWVzdCgpIHtcbiAgICB0aGlzLmNyZWF0ZVJvdXRlKCd2aWV3cy9tb2R1bGVzL2hlYWRlci1uYXYtdW5hdXRob3JpemVkLmhicycsIEFwcC5oZWFkZXIpO1xuICB9LFxuICBhZGRBbGJ1bUZvcm06IGZ1bmN0aW9uIGFkZEFsYnVtRm9ybSgpIHtcbiAgICB0aGlzLmNyZWF0ZVJvdXRlKCd2aWV3cy9tb2R1bGVzL2FkZC1hbGJ1bS1mb3JtLmhicycsICgwLCBfanF1ZXJ5LmRlZmF1bHQpKCcuYWRkLWFsYnVtLWNvbnRhaW5lcicpKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICgwLCBfanF1ZXJ5LmRlZmF1bHQpKCcuYWRkLWFsYnVtLWZvcm0nKS5zbGlkZURvd24oKTtcbiAgICB9LCA1MDApO1xuICB9LFxuICBhZGRQaG90b0Zvcm06IGZ1bmN0aW9uIGFkZFBob3RvRm9ybSgpIHtcbiAgICB0aGlzLmNyZWF0ZVJvdXRlKCd2aWV3cy9tb2R1bGVzL2FkZC1waG90by1mb3JtLmhicycsICgwLCBfanF1ZXJ5LmRlZmF1bHQpKCcuYWRkLXBob3RvLWNvbnRhaW5lcicpKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICgwLCBfanF1ZXJ5LmRlZmF1bHQpKCcuYWRkLXBob3RvLWZvcm0nKS5zbGlkZURvd24oKTtcbiAgICB9LCA1MDApO1xuICB9LFxuICBjcmVhdGVSb3V0ZTogZnVuY3Rpb24gY3JlYXRlUm91dGUodXJsLCBjb250YWluZXIsIGNvbnRleHQpIHtcbiAgICB2YXIgdGVtcGxhdGU7XG5cbiAgICBfanF1ZXJ5LmRlZmF1bHQuZ2V0KHVybCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShyZXNwb25zZSk7XG5cbiAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUoY29udGV4dCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRhaW5lci5odG1sKHRlbXBsYXRlKTtcbiAgICB9KTtcbiAgfVxufTsiXX0=
